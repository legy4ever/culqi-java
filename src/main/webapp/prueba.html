<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>Checkout Tests</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<br>

v0.1.2
<br>
<br>
<form class="formulario-pago">

    <select id="llave" name="llave" placeholder="Llave">
        <option value="zzmxZlgIJtKKy0F71DMsZPWnPVzow4S90abBScLDIrk=">Llave de Culqi</option>
    </select><br>

    <select id="codigoComercio" name="codigoComercio" placeholder="Código Comercio">
        <option value="testc101">Culqi</option>
    </select><br>

    <input type="text" id="numero_orden" placeholder="Número de orden"><br>

    <select id="moneda" name="moneda" placeholder="Moneda">
        <option value="USD">Dólares</option>
        <option value="PEN">Soles</option>
    </select><br>

    <input type="text" id="monto" placeholder="Monto"><br>
    <input type="text" id="descripcion" placeholder="Descripción"><br><br>
</form>
<button id="btn_pagar" onclick="return venta();">Generar</button>

<div id="culqi_checkout"></div>
<!--<script src="0RG4vg8GUFqkC-m6WwxuSIixusy_hLs1BzfcEGvRzSKFxyrjgSM7PTgIzn8vSYL4ndaDQcC28_-7IOFH7PqzdeVkCIOgrDwmif6-H1nBn7tJvI-Jyg6LBapT_GVmbPE-nbiOAMI6f8LSPHw1ZQkoQoAOXPGvSWkGdJebmr93BFyPFqaBMpFPowlnc3BHLIVkSoRd5ljTWuSFTVNsEczDxyCVHcJqEqvECb76t_HKJm25eVY88fjibDSEmIb0PreKED-TL0kHKoSBOW67zBaG-94dRQgj6brwNecRB2OT9vFyk0qEZIkzGEdXk_EXUJR-0ew99Z5IeZRfBaXTwqsYyQ=="></script>!-->

<script type="text/javascript">

    function venta()

    {
        var values = $(this).serialize();

        $.ajax({
            url: "cifrar",
            type: "POST",
            datatype : "application/json",
            contentType: "application/json",
            data: JSON.stringify(
                    {
                        'llave' : document.getElementById("llave").value,
                        'codigoComercio' : document.getElementById("codigoComercio").value,
                        'numero_orden' : document.getElementById("numero_orden").value,
                        'moneda' : document.getElementById("moneda").value,
                        'monto' : document.getElementById("monto").value,
                        'descripcion' : document.getElementById("descripcion").value
                    }),

            success: function(data) {

                var text = data.responseText;
                var obj = JSON.parse(data);

                var url = "https://integ-pago.culqi.com/js/web/"+document.getElementById("codigoComercio").value+"/"+obj["cifrado"];

                console.log(url);

                //alert(data.count);

                //console.log(url);

                $.getScript(url);

            },
            error:function(data){

                // var text = data.responseText;
                //alert(text);

            }
        });
    }

</script>
</body>


</html>